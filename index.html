<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>St. John Bosco Campus Events</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-weight: bold;
      margin: 0;
      padding: 0;
    }
    h1 {
      color: navy;
      text-align: left;
      padding: 20px;
      margin-left: 5%;
    }
    .event-list {
      color: navy;
      text-decoration: underline;
      font-size: 14px;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <h1>St. John Bosco Campus Events</h1>
  <div class="map-container">
    <img src="https://resources.finalsite.net/images/f_auto,q_auto,t_image_size_2/v1661938386/bosco/gj9ncox3wdkzh3cbmn6m/Campus-MAP.jpg" alt="Campus Map">
    <div class="marker" id="marker-1">
      <img class="hover-image" src="https://www.howardcdm.com/wp-content/uploads/2020/09/IMG_5458-scaled.jpg" alt="Track & Field">
    </div>
    <div class="marker" id="marker-2">
      <img class="hover-image" src="https://resources.finalsite.net/images/f_auto,q_auto,t_image_size_2/v1656441051/bosco/crparcmj0qrxs8sbr0vb/DSC09162-Edit.jpg" alt="Thunderdome/SJB Gym">
    </div>
    <div class="marker" id="marker-3">
      <img class="hover-image" src="https://pbs.twimg.com/media/GO29Eyba4AEnP-B.jpg:large" alt="Baseball Field">
    </div>
    <div class="marker" id="marker-4">
      <img class="hover-image" src="https://plae.us/wp-content/uploads/casestudies/domestic/st-johns-bosco/hero-scaled.jpg" alt="Weight Room">
    </div>
    <div class="marker" id="marker-5">
      <img class="hover-image" src="https://givebutter.com/cdn-cgi/image/width=1200/https://givebutter.s3.amazonaws.com/media/DEySm1VPVbYRhfNRN4SKHWRxmKSJ9JHt104Vqr10.jpeg" alt="Panish Family Stadium">
    </div>
    <div class="marker" id="marker-6">
      <img class="hover-image" src="https://resources.finalsite.net/images/f_auto,q_auto,t_image_size_2/v1728059939/bosco/vb9uty8oyno2oeqq0n4f/DSC016111.jpg" alt="Bosco Quad">
    </div>
    <div class="marker" id="marker-7">
      <img class="hover-image" src="https://asset.findingschool.com/attachments/SCH004176/300x300_5ad404baaba3c554998bed5a132333de.webp" alt="SJB Aquatics Pool">
    </div>

  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyC9mqnZhBnaq9WUgGyXXU2qDpsZ3ApagXs",
      authDomain: "bosconow2.firebaseapp.com",
      projectId: "bosconow2",
      storageBucket: "bosconow2.firebasestorage.app",
      messagingSenderId: "1057613433966",
      appId: "1:1057613433966:web:8522231b75aa6588b32a7f",
      measurementId: "G-D6Y7HYH8BT"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function addEvent() {
      const location = document.getElementById("event-location").value;
      const eventName = document.getElementById("event-name").value;
      const eventHour = document.getElementById("event-hour").value;
      const eventMinute = document.getElementById("event-minute").value;
      const eventPeriod = document.getElementById("event-period").value;

      if (!eventName.trim() || !eventHour.trim() || !eventMinute.trim()) {
        alert("Please enter event name and time.");
        return;
      }

      await addDoc(collection(db, "events"), {
        location: location,
        name: eventName,
        time: `${eventHour}:${eventMinute} ${eventPeriod}`
      });
    }

    function listenForEvents() {
      onSnapshot(collection(db, "events"), (snapshot) => {
        const events = {};
        snapshot.forEach((doc) => {
          const data = doc.data();
          if (!events[data.location]) {
            events[data.location] = [];
          }
          events[data.location].push(`${data.name} at ${data.time}`);
        });

        Object.keys(events).forEach((markerId) => {
          const eventListDiv = document.getElementById(`events-${markerId}`);
          if (eventListDiv) {
            eventListDiv.innerHTML = events[markerId].map(event => `<div>${event}</div>`).join('');
          }
        });
      });
    }

    listenForEvents();
  </script>
</body>
</html>
